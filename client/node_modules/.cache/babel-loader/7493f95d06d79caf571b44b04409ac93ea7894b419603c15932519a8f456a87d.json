{"ast":null,"code":"import _slicedToArray from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport { BaseClient, BaseResponse } from './base.js';\nimport { AbortError } from '../../utils.js';\nvar XHRResponse = /*#__PURE__*/function (_BaseResponse) {\n  _inherits(XHRResponse, _BaseResponse);\n  var _super = _createSuper(XHRResponse);\n  /**\n   * BaseResponse facade for XMLHttpRequest\n   * @param {XMLHttpRequest} xhr\n   * @param {ArrayBuffer} data\n   */\n  function XHRResponse(xhr, data) {\n    var _this;\n    _classCallCheck(this, XHRResponse);\n    _this = _super.call(this);\n    _this.xhr = xhr;\n    _this.data = data;\n    return _this;\n  }\n  _createClass(XHRResponse, [{\n    key: \"status\",\n    get: function get() {\n      return this.xhr.status;\n    }\n  }, {\n    key: \"getHeader\",\n    value: function getHeader(name) {\n      return this.xhr.getResponseHeader(name);\n    }\n  }, {\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", this.data);\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this);\n      }));\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n      return getData;\n    }()\n  }]);\n  return XHRResponse;\n}(BaseResponse);\nexport var XHRClient = /*#__PURE__*/function (_BaseClient) {\n  _inherits(XHRClient, _BaseClient);\n  var _super2 = _createSuper(XHRClient);\n  function XHRClient() {\n    _classCallCheck(this, XHRClient);\n    return _super2.apply(this, arguments);\n  }\n  _createClass(XHRClient, [{\n    key: \"constructRequest\",\n    value: function constructRequest(headers, signal) {\n      var _this2 = this;\n      return new Promise(function (resolve, reject) {\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', _this2.url);\n        xhr.responseType = 'arraybuffer';\n        for (var _i = 0, _Object$entries = Object.entries(headers); _i < _Object$entries.length; _i++) {\n          var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n            key = _Object$entries$_i[0],\n            value = _Object$entries$_i[1];\n          xhr.setRequestHeader(key, value);\n        }\n\n        // hook signals\n        xhr.onload = function () {\n          var data = xhr.response;\n          resolve(new XHRResponse(xhr, data));\n        };\n        xhr.onerror = reject;\n        xhr.onabort = function () {\n          return reject(new AbortError('Request aborted'));\n        };\n        xhr.send();\n        if (signal) {\n          if (signal.aborted) {\n            xhr.abort();\n          }\n          signal.addEventListener('abort', function () {\n            return xhr.abort();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function () {\n      var _request = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n        var _ref,\n          headers,\n          signal,\n          response,\n          _args2 = arguments;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _ref = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : {}, headers = _ref.headers, signal = _ref.signal;\n              _context2.next = 3;\n              return this.constructRequest(headers, signal);\n            case 3:\n              response = _context2.sent;\n              return _context2.abrupt(\"return\", response);\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2, this);\n      }));\n      function request() {\n        return _request.apply(this, arguments);\n      }\n      return request;\n    }()\n  }]);\n  return XHRClient;\n}(BaseClient);","map":{"version":3,"names":["BaseClient","BaseResponse","AbortError","XHRResponse","_BaseResponse","_inherits","_super","_createSuper","xhr","data","_this","_classCallCheck","call","_createClass","key","get","status","value","getHeader","name","getResponseHeader","_getData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","abrupt","stop","getData","apply","arguments","XHRClient","_BaseClient","_super2","constructRequest","headers","signal","_this2","Promise","resolve","reject","XMLHttpRequest","open","url","responseType","_i","_Object$entries","Object","entries","length","_Object$entries$_i","_slicedToArray","setRequestHeader","onload","response","onerror","onabort","send","aborted","abort","addEventListener","_request","_callee2","_ref","_args2","_callee2$","_context2","undefined","sent","request"],"sources":["/home/umang/iHub/DFS_ReactViewer/client/node_modules/geotiff/dist-module/source/client/xhr.js"],"sourcesContent":["import { BaseClient, BaseResponse } from './base.js';\nimport { AbortError } from '../../utils.js';\n\nclass XHRResponse extends BaseResponse {\n  /**\n   * BaseResponse facade for XMLHttpRequest\n   * @param {XMLHttpRequest} xhr\n   * @param {ArrayBuffer} data\n   */\n  constructor(xhr, data) {\n    super();\n    this.xhr = xhr;\n    this.data = data;\n  }\n\n  get status() {\n    return this.xhr.status;\n  }\n\n  getHeader(name) {\n    return this.xhr.getResponseHeader(name);\n  }\n\n  async getData() {\n    return this.data;\n  }\n}\n\nexport class XHRClient extends BaseClient {\n  constructRequest(headers, signal) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', this.url);\n      xhr.responseType = 'arraybuffer';\n      for (const [key, value] of Object.entries(headers)) {\n        xhr.setRequestHeader(key, value);\n      }\n\n      // hook signals\n      xhr.onload = () => {\n        const data = xhr.response;\n        resolve(new XHRResponse(xhr, data));\n      };\n      xhr.onerror = reject;\n      xhr.onabort = () => reject(new AbortError('Request aborted'));\n      xhr.send();\n\n      if (signal) {\n        if (signal.aborted) {\n          xhr.abort();\n        }\n        signal.addEventListener('abort', () => xhr.abort());\n      }\n    });\n  }\n\n  async request({ headers, signal } = {}) {\n    const response = await this.constructRequest(headers, signal);\n    return response;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}