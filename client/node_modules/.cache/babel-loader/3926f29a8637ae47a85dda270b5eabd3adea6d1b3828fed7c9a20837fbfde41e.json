{"ast":null,"code":"import _regeneratorRuntime from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import'./App.css';import axios from'axios';import GetFiles from'./components/GetFiles';import{config}from'./config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(props){var _useState=useState({count:0,name:\"\"}),_useState2=_slicedToArray(_useState,2),currentFile=_useState2[0],setCurrentFile=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUploaded=_useState4[0],setIsUploaded=_useState4[1];var email=localStorage.getItem(\"email\").toLowerCase();var shortEmail='';for(var i=0;i<email.length;i++){var charCode=email.charCodeAt(i);if(charCode>=48&&charCode<=57||charCode>=65&&charCode<=90||charCode>=97&&charCode<=122){shortEmail+=email.charAt(i);}}function handleClick(){props.logout();}function handleChange(e){var file=e.target.files[0];setCurrentFile(function(prevValue){return _objectSpread(_objectSpread({},prevValue),{},{name:file});});};function uploadFile(_x){return _uploadFile.apply(this,arguments);}function _uploadFile(){_uploadFile=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var formData,bucketURL,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('file',currentFile.name);bucketURL=config.BASE_URL+\"/objects/\"+shortEmail;_context.prev=4;console.log(\"Initiating upload\");console.log(formData);_context.next=9;return axios.post(bucketURL,formData);case 9:response=_context.sent;console.log(response);console.log(\"Upload complete\");setIsUploaded(true);setCurrentFile(function(prevValue){return _objectSpread(_objectSpread({},prevValue),{},{count:prevValue.count+1});});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](4);console.log(_context.t0);case 19:case\"end\":return _context.stop();}},_callee,null,[[4,16]]);}));return _uploadFile.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-btn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-container\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",onChange:handleChange,className:\"input-file\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:uploadFile,className:\"upload-button\",children:\"Upload\"})]})}),/*#__PURE__*/_jsx(\"button\",{id:\"logout-btn\",onClick:handleClick,children:\"Logout\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"get-files\",children:/*#__PURE__*/_jsx(GetFiles,{fileObj:currentFile,uploadStatus:isUploaded,email:shortEmail})})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","GetFiles","config","jsx","_jsx","jsxs","_jsxs","App","props","_useState","count","name","_useState2","_slicedToArray","currentFile","setCurrentFile","_useState3","_useState4","isUploaded","setIsUploaded","email","localStorage","getItem","toLowerCase","shortEmail","i","length","charCode","charCodeAt","charAt","handleClick","logout","handleChange","e","file","target","files","prevValue","_objectSpread","uploadFile","_x","_uploadFile","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","bucketURL","response","wrap","_callee$","_context","prev","next","preventDefault","FormData","append","BASE_URL","console","log","post","sent","t0","stop","className","children","type","id","onChange","onClick","fileObj","uploadStatus"],"sources":["/home/umang/iHub/DFS_ReactViewer/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport GetFiles from './components/GetFiles';\nimport { config } from './config'; \n\n\nfunction App(props) {\n  const [currentFile,setCurrentFile] =useState({\n    count: 0,\n    name: \"\"\n  });\n  const [isUploaded,setIsUploaded] = useState(false);\n  \n  const email = localStorage.getItem(\"email\").toLowerCase();\n  let shortEmail ='';\n  for (let i = 0; i < email.length; i++) {\n    const charCode = email.charCodeAt(i);   \n    if ((charCode >= 48 && charCode <= 57) || (charCode >= 65 && charCode <= 90) || (charCode >= 97 && charCode <= 122)) {\n      shortEmail += email.charAt(i);\n    }\n  }\n  \n\n  function handleClick(){\n    props.logout();\n  }\n\n  function handleChange(e){\n    const file =  e.target.files[0];\n    setCurrentFile((prevValue)=>({\n      ...prevValue,\n      name : file\n    }))\n  };\n\n  \n  async function uploadFile(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('file', currentFile.name);\n    let bucketURL = config.BASE_URL+\"/objects/\" + shortEmail;\n    try {\n      console.log(\"Initiating upload\")\n      console.log(formData);\n      const response = await axios.post(bucketURL, formData);\n      console.log(response);\n      console.log(\"Upload complete\");\n      setIsUploaded(true);\n      setCurrentFile((prevValue) => ({\n        ...prevValue,\n        count: prevValue.count+1\n      }))\n      \n    } catch (error) {\n      console.log(error);\n    }\n\n  }\n   \n  \n  return (\n    <div className=\"App\">\n      <div className='main-btn'>\n        <div className=\"form-container\">\n          <form>\n            <input type=\"file\" id=\"fileInput\" onChange={handleChange} className=\"input-file\"/>\n            <button type=\"submit\" onClick={uploadFile} className=\"upload-button\">Upload</button>\n          </form>\n        </div>\n        <button id=\"logout-btn\" onClick={handleClick}>Logout</button>\n      </div>\n      <div className='get-files'>\n        <GetFiles fileObj={currentFile} uploadStatus={isUploaded} email={shortEmail}/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}