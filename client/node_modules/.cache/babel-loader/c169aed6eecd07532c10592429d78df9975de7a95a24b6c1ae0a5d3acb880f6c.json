{"ast":null,"code":"import _toConsumableArray from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import RenderFile from'./RenderFile';import'./GetFiles.css';import{config}from\"../config\";import{jsx as _jsx}from\"react/jsx-runtime\";function GetFiles(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),backendData=_useState2[0],setBackendData=_useState2[1];var isFirstRender=React.useRef(true);useEffect(function(){console.log(isFirstRender.current);if(isFirstRender.current){getFiles();isFirstRender.current=false;return;}else{var latest_file=props.fileObj.name.name;setBackendData(function(preValue){return[].concat(_toConsumableArray(preValue),[latest_file]);});}},[props.fileObj.count]);function getFiles(){fetch(config.BASE_URL+\"/objects/\"+props.email).then(function(response){return response.json();}).then(function(data){setBackendData(data.objects);}).catch(function(error){console.log(error);});}return/*#__PURE__*/_jsx(\"div\",{className:\"get-files-container\",children:backendData!==undefined?/*#__PURE__*/_jsx(RenderFile,{currFile:props.fileObj.name.name,info:backendData,uploadStatus:props.uploadStatus,email:props.email}):null});}export default GetFiles;","map":{"version":3,"names":["React","useState","useEffect","RenderFile","config","jsx","_jsx","GetFiles","props","_useState","_useState2","_slicedToArray","backendData","setBackendData","isFirstRender","useRef","console","log","current","getFiles","latest_file","fileObj","name","preValue","concat","_toConsumableArray","count","fetch","BASE_URL","email","then","response","json","data","objects","catch","error","className","children","undefined","currFile","info","uploadStatus"],"sources":["/home/umang/iHub/DFS_ReactViewer/client/src/components/GetFiles.js"],"sourcesContent":["import React,{useState,useEffect} from \"react\";\nimport RenderFile from './RenderFile';\nimport './GetFiles.css'\nimport { config } from \"../config\";\n\nfunction GetFiles(props){\n    const [backendData,setBackendData] = useState([]);\n    const isFirstRender = React.useRef(true);\n    useEffect(() => {\n        console.log(isFirstRender.current);\n        if(isFirstRender.current){\n            getFiles();\n            isFirstRender.current = false;\n            return;\n        }else{\n            const latest_file = props.fileObj.name.name;\n            setBackendData((preValue)=>\n                [...preValue,latest_file]\n            )\n        }\n    }, [props.fileObj.count]);\n\n    function getFiles() {\n        fetch(config.BASE_URL+\"/objects/\"+props.email)\n        .then(response => response.json())\n        .then(\n          data => {\n            setBackendData(data.objects)\n          }\n        )\n        .catch(error => {\n            console.log(error);\n        });\n    }\n\n    return (\n        <div className=\"get-files-container\">\n            {backendData!== undefined ? <RenderFile currFile={props.fileObj.name.name} info ={backendData} uploadStatus= {props.uploadStatus} email={props.email}/> : null} \n        </div>\n    )\n}\n\nexport default GetFiles;"],"mappings":"kQAAA,MAAO,CAAAA,KAAK,EAAEC,QAAQ,CAACC,SAAS,KAAO,OAAO,CAC9C,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,gBAAgB,CACvB,OAASC,MAAM,KAAQ,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnC,QAAS,CAAAC,QAAQA,CAACC,KAAK,CAAC,CACpB,IAAAC,SAAA,CAAqCR,QAAQ,CAAC,EAAE,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,WAAW,CAAAF,UAAA,IAACG,cAAc,CAAAH,UAAA,IACjC,GAAM,CAAAI,aAAa,CAAGd,KAAK,CAACe,MAAM,CAAC,IAAI,CAAC,CACxCb,SAAS,CAAC,UAAM,CACZc,OAAO,CAACC,GAAG,CAACH,aAAa,CAACI,OAAO,CAAC,CAClC,GAAGJ,aAAa,CAACI,OAAO,CAAC,CACrBC,QAAQ,CAAC,CAAC,CACVL,aAAa,CAACI,OAAO,CAAG,KAAK,CAC7B,OACJ,CAAC,IAAI,CACD,GAAM,CAAAE,WAAW,CAAGZ,KAAK,CAACa,OAAO,CAACC,IAAI,CAACA,IAAI,CAC3CT,cAAc,CAAC,SAACU,QAAQ,WAAAC,MAAA,CAAAC,kBAAA,CAChBF,QAAQ,GAACH,WAAW,IAC5B,CAAC,CACL,CACJ,CAAC,CAAE,CAACZ,KAAK,CAACa,OAAO,CAACK,KAAK,CAAC,CAAC,CAEzB,QAAS,CAAAP,QAAQA,CAAA,CAAG,CAChBQ,KAAK,CAACvB,MAAM,CAACwB,QAAQ,CAAC,WAAW,CAACpB,KAAK,CAACqB,KAAK,CAAC,CAC7CC,IAAI,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACC,IAAI,CAAC,CAAC,GAAC,CACjCF,IAAI,CACH,SAAAG,IAAI,CAAI,CACNpB,cAAc,CAACoB,IAAI,CAACC,OAAO,CAAC,CAC9B,CACF,CAAC,CACAC,KAAK,CAAC,SAAAC,KAAK,CAAI,CACZpB,OAAO,CAACC,GAAG,CAACmB,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAEA,mBACI9B,IAAA,QAAK+B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAC/B1B,WAAW,GAAI2B,SAAS,cAAGjC,IAAA,CAACH,UAAU,EAACqC,QAAQ,CAAEhC,KAAK,CAACa,OAAO,CAACC,IAAI,CAACA,IAAK,CAACmB,IAAI,CAAG7B,WAAY,CAAC8B,YAAY,CAAGlC,KAAK,CAACkC,YAAa,CAACb,KAAK,CAAErB,KAAK,CAACqB,KAAM,CAAC,CAAC,CAAG,IAAI,CAC7J,CAAC,CAEd,CAEA,cAAe,CAAAtB,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}