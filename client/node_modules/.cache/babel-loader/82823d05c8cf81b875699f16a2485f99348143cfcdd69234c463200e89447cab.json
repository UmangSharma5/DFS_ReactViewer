{"ast":null,"code":"import _regeneratorRuntime from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/umang/iHub/DFS_ReactViewer/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import ReactDOM from'react-dom';import'./index.css';import App from'./App';import Login from'./Login';import axios from'axios';import{BrowserRouter}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";var LOGIN_URL=\"https://datafoundation.iiit.ac.in/api/login\";var tokenId=localStorage.getItem(\"token\");function logoutUser(){localStorage.clear();var root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(BrowserRouter,{basename:\"/hv\",children:/*#__PURE__*/_jsx(Login,{checkUser:checkUser})})}));}function checkAuth(_x){return _checkAuth.apply(this,arguments);}function _checkAuth(){_checkAuth=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(email){var GET_URL,response,root,_root;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:GET_URL=\"https://datafoundation.iiit.ac.in/api/detokn?token=\"+tokenId;_context.prev=1;_context.next=4;return axios.get(GET_URL);case 4:response=_context.sent;// ReactDOM.render(<App logout={logoutUser} />, document.getElementById(\"root\"));\nroot=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(BrowserRouter,{basename:\"/hv\",children:/*#__PURE__*/_jsx(App,{})})}));_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(\"Incorrect token!!!\");_root=ReactDOM.createRoot(document.getElementById('root'));_root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(BrowserRouter,{basename:\"/hv\",children:/*#__PURE__*/_jsx(Login,{checkUser:checkUser})})}));case 14:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return _checkAuth.apply(this,arguments);}function checkUser(_x2,_x3){return _checkUser.apply(this,arguments);}function _checkUser(){_checkUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(email,password){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(LOGIN_URL,{email:email,password:password});case 3:response=_context2.sent;localStorage.setItem(\"token\",response.data.data.token);tokenId=localStorage.getItem(\"token\");_context2.next=8;return checkAuth(email);case 8:return _context2.abrupt(\"return\",true);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(\"Incorrect Username or password!!!\");return _context2.abrupt(\"return\",false);case 15:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return _checkUser.apply(this,arguments);}checkAuth();","map":{"version":3,"names":["React","ReactDOM","App","Login","axios","BrowserRouter","jsx","_jsx","LOGIN_URL","tokenId","localStorage","getItem","logoutUser","clear","root","createRoot","document","getElementById","render","StrictMode","children","basename","checkUser","checkAuth","_x","_checkAuth","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","email","GET_URL","response","_root","wrap","_callee$","_context","prev","next","get","sent","t0","console","log","stop","_x2","_x3","_checkUser","_callee2","password","_callee2$","_context2","post","setItem","data","token","abrupt"],"sources":["/home/umang/iHub/DFS_ReactViewer/client/src/index.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport Login from './Login';\nimport axios from 'axios';\nimport {BrowserRouter} from 'react-router-dom';\n\nconst LOGIN_URL = \"https://datafoundation.iiit.ac.in/api/login\";\nvar tokenId = localStorage.getItem(\"token\");\n\n\nfunction logoutUser () {\n  localStorage.clear();\n  const root = ReactDOM.createRoot(document.getElementById('root'));\n    root.render( <React.StrictMode>\n          <BrowserRouter basename= \"/hv\">\n            <Login checkUser={checkUser} />\n          </BrowserRouter>\n      </React.StrictMode>\n    );\n}\n\n\nasync function checkAuth(email) {\n  const GET_URL = \"https://datafoundation.iiit.ac.in/api/detokn?token=\"+tokenId;\n  try {\n    const response = await axios.get(GET_URL);\n    // ReactDOM.render(<App logout={logoutUser} />, document.getElementById(\"root\"));\n    const root = ReactDOM.createRoot(document.getElementById('root'));\n    root.render( <React.StrictMode>\n          <BrowserRouter basename= \"/hv\">\n            <App />\n          </BrowserRouter>\n      </React.StrictMode>\n    );\n\n  } catch (error) {\n    console.log(\"Incorrect token!!!\");\n    const root = ReactDOM.createRoot(document.getElementById('root'));\n    root.render( <React.StrictMode>\n          <BrowserRouter basename= \"/hv\">\n            <Login checkUser={checkUser} />\n          </BrowserRouter>\n      </React.StrictMode>\n    );\n  }\n}\n\n\nasync function checkUser(email, password) {\n  try {\n    const response = await axios.post(LOGIN_URL, { email, password });\n    localStorage.setItem(\"token\", response.data.data.token);\n    tokenId = localStorage.getItem(\"token\");\n    await checkAuth(email);\n    return true;\n  } catch (error) {\n    console.log(\"Incorrect Username or password!!!\");\n    return false;\n  }\n}\n\ncheckAuth();\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}